<%= tag.turbo_frame id:'box-selector-popup' do %>
  <div class="flex flex-col justify-start items-start w-[360px] gap-px py-0.5 rounded-lg bg-white border border-gray-300" style="box-shadow: 1px 1px 4px 0 rgba(0,0,0,0.1);">
    <%= link_to select_all_boxes_path, class:"flex justify-between items-center self-stretch flex-grow-0 flex-shrink-0 px-4 py-2", data: { turbo_frame: '_top' } do %>
      <div class="flex justify-center items-center flex-grow-0 flex-shrink-0 relative overflow-hidden gap-[29px]">
        <p class="flex-grow-0 flex-shrink-0 text-base font-medium text-left text-gray-900">Všetky schránky</p>
      </div>
      <div class="flex justify-center items-center flex-grow-0 flex-shrink-0 relative overflow-hidden gap-1.5 px-1.5 py-0.5 rounded-md bg-gray-50 border border-gray-300">
        <p class="flex-grow-0 flex-shrink-0 text-sm text-left text-gray-600"><%= @all_unread_messages_count %></p>
      </div>
    <% end %>
    <div class="flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 relative">
      <svg width="360" height="1" viewBox="0 0 360 1" fill="none" xmlns="http://www.w3.org/2000/svg" class="flex-grow" preserveAspectRatio="xMidYMid meet">
        <line y1="0.5" x2="360" y2="0.5" stroke="#E5E7EB"></line>
      </svg>
    </div>
    <%= form_with url: search_boxes_path, class:"flex justify-start items-center self-stretch flex-grow-0 flex-shrink-0 gap-2 p-4 border-t-0 border-r-0 border-b border-l-0 border-gray-200" do |form| %>
      <div class="flex w-full items-center rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600">
        <div class="p-2">
          <%= render Icons::SearchComponent.new %>
        </div>
        <%= tag.turbo_frame id:'box-search-results' %>
        <%= form.search_field :name_search, value: params[:name_search], placeholder: "Vyhľadaj schránku",
                  oninput: "this.form.requestSubmit()",
                  onreset: "this.form.requestSubmit()",
                  class: "block w-full flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6" %>
      </div>
    <% end %>
    <%= tag.turbo_frame id:'box-list', class:"flex-col self-stretch" do %>
      <%= render Layout::BoxListComponent.with_collection(@boxes) %>
    <% end %>
  </div>
<% end %>
